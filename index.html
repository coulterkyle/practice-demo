<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Libray of Congress Search Engine</title>
  <link rel="stylesheet" href="./assets/style.css">
</head>

<body>
  
  <header>
    <h1>Library of Congress Search Engine</h1>
  </header>
  
  <!-- Form for performing a search -->
    <form id="searchForm">
      <h2>Search Results</h2>
      <input type="text" id="searchInput" placeholder="Enter your search query">
      <input type="select" id="format" placeholder="Select a format...">
      <button type="submit" value="Search">Search</button>
      <button type="submit" value="goBack" id="hide">Go Back</button>
    </form>

    <!-- Container for displaying the search results -->
    <div id="searchResults"></div>

    <!-- <script>
      // Function to fetch data from the Library of Congress API
      function fetchData(url) {
        return fetch(url)
          .then(response => response.json())
          .then(data => data.results);
      }

      // Function to display the search results
      function displayResults(results) {
        const searchResultsContainer = document.getElementById('searchResults');
        
        // Clear previous results
        searchResultsContainer.innerHTML = '';

        // Display each result
        results.forEach(result => {
          const resultElement = document.createElement('div');
          resultElement.textContent = result.title;
          searchResultsContainer.appendChild(resultElement);
        });
      }

      // Function to handle form submission
      function handleFormSubmit(event) {
        event.preventDefault();
        
        const searchInput = document.getElementById('searchInput');
        const query = searchInput.value;

        // Build the API request URL
        let url = 'https://www.loc.gov/search/';

        // Check if a format is specified
        const formatParam = new URLSearchParams(window.location.search).get('format');
        if (formatParam) {
          url += 'format/' + formatParam + '/';
        }

        // Add the search query to the URL
        url += '?q=' + encodeURIComponent(query);

        // Fetch data from the API and display the results
        fetchData(url)
          .then(results => displayResults(results))
          .catch(error => console.error(error));
      }

      // Add event listener to the form
      const searchForm = document.getElementById('searchForm');
      searchForm.addEventListener('submit', handleFormSubmit);

      // Parse query parameters on page load
      const queryParams = new URLSearchParams(window.location.search);
      const formatParam = queryParams.get('format');

      // Use format endpoint if format query parameter is specified
      if (formatParam) {
        const formatUrl = 'https://www.loc.gov/format/' + formatParam + '/';
        fetchData(formatUrl)
          .then(results => displayResults(results))
          .catch(error => console.error(error));
      }
      // Use search endpoint if format query parameter is not specified
      else {
        const searchUrl = 'https://www.loc.gov/search/';
        fetchData(searchUrl)
          .then(results => displayResults(results))
          .catch(error => console.error(error));
      }
    </script> -->
    <script src="./assets/script.js"></script>
  </body>
</html>